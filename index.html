<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>弹幕魔法使</title>
    <script type="text/javascript" src="lib/glMatrix-0.9.5.min.js"></script>
    <script type="text/javascript" src="utility/Inherit.js"></script>
    <script type="text/javascript" src="utility/Draw.js"></script>
    <script type="text/javascript" src="utility/Random.js"></script>
    <script type="text/javascript" src="utility/FreeList.js"></script>
    <script type="text/javascript" src="utility/WebGL.js"></script>
    <script type="text/javascript" src="data/danmaku_helper.js"></script>
    <script type="text/javascript" src="data/bullets_params.js"></script>
    <script type="text/javascript" src="data/enemies_params.js"></script>
    <script type="text/javascript" src="data/bosses_params.js"></script>
    <script type="text/javascript" src="data/talk_params.js"></script>
    <script type="text/javascript" src="data/stage_params.js"></script>
    <!--主要游戏逻辑-->
    <script type="text/javascript" src="source/Game.js"></script>
    <script type="text/javascript" src="source/MoveVector.js"></script>
    <!--实体类-->
    <script type="text/javascript" src="source/Element.js"></script>
    <script type="text/javascript" src="source/Background.js"></script>
    <script type="text/javascript" src="source/Fighter.js"></script>
    <script type="text/javascript" src="source/FighterOption.js"></script>
    <script type="text/javascript" src="source/Enemy.js"></script>
    <script type="text/javascript" src="source/Boss.js"></script>
    <!--特效-->
    <script type="text/javascript" src="source/Effect.js"></script>
    <script type="text/javascript" src="source/Bullet.js"></script>
    <script type="text/javascript" src="source/Bomb.js"></script>
    <script type="text/javascript" src="source/EnemyBullet.js"></script>
    <script type="text/javascript" src="source/Item.js"></script>
    <script type="text/javascript" src="source/SpellCard.js"></script>
    <script type="text/javascript" src="source/GameState.js"></script>
    <script type="text/javascript" src="source/LoadingState.js"></script>
    <script type="text/javascript" src="source/OpeningState.js"></script>
    <script type="text/javascript" src="source/CharacterSelectState.js"></script>
    <script type="text/javascript" src="source/StageState.js"></script>
    <script type="text/javascript" src="source/EndingState.js"></script>
    <script type="text/javascript" src="source/StaffRollState.js"></script>
    <script type="text/javascript">
        let __game;

        let init = function () {
            let mainCanvas = document.getElementById('mainCanvas');
            let bgCanvas = document.getElementById('bgCanvas');
            let game = new Game(mainCanvas, bgCanvas);
            __game = game;
            window.onkeydown = function (event) {
                game.handleKeyDown(event);
            };
            window.onkeyup = function (event) {
                game.handleKeyUp(event);
            };
            game.run();
        };
    </script>
</head>

<body onLoad="init()">

<div id="canvasdiv" style="position:relative; width:640px; height:480px">
    <canvas id="mainCanvas" width="640" height="480" style="z-index:2; position:absolute; left:0; top:0;"></canvas>
    <canvas id="bgCanvas" width="480" height="480" style="z-index: 1; position:absolute; left:0; top:0;"></canvas>
</div>

<h2>
    游戏说明
</h2>
<p>
    如果遇到了游戏卡死的情况, 是Google Chrome对WebGL的js库限制较为严格, 建议换用Firefox和Microsoft Edge Dev进行游戏!<br/>
    本游戏在Microsoft Edge Dev(基于Chromium)下通过全部测试.
</p>
<h2>
    操作介绍
</h2>
<ul>
    <li>上下左右键移动角色</li>
    <li>Z键发射弹幕/确认</li>
    <li>X键使用必杀/取消</li>
    <li>Shift进入高火力模式</li>
    <li>空格键切换角色状态</li>
</ul>
</body>
</html>
